# Website Transition Claude Brain - Flow Diagram

## Overview
WordPress to Vercel/Next.js migration with SEO protection. 9 phases, ~50 nodes.

## High-Level Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        WEBSITE TRANSITION CLAUDE BRAIN                          │
│                     WordPress → Vercel Migration Pipeline                       │
└─────────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────┐
                                    │ INTAKE  │
                                    │ (prime) │
                                    └────┬────┘
                                         │
                                         ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 1: KEYWORD STRATEGY                              │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ keyword_build_  │───▶│ keyword_        │───▶│ keyword_        │        │
    │  │ universe        │    │ competitor_check│    │ page_map        │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │  ┌─────────────────┐    ┌─────────────────┐                               │
    │  │ keyword_        │◀───│ keyword_        │◀──────────────────────        │
    │  │ scoring         │    │ validation_gate │   (retry if fail)             │
    │  └─────────────────┘    └────────┬────────┘                               │
    └────────────────────────────────────│───────────────────────────────────────┘
                                         │ ✓ pass
                                         ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 2: URL MAPPING                                   │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ mapping_crawl   │    │ mapping_gsc     │    │ mapping_        │        │
    │  │ (tributary)     │    │ (tributary)     │    │ backlinks       │        │
    │  └────────┬────────┘    └────────┬────────┘    └────────┬────────┘        │
    │           │                      │                      │                  │
    │           └──────────────────────┴──────────────────────┘                  │
    │                                  │ (parallel)                              │
    │                                  ▼                                         │
    │                     ┌─────────────────────┐                                │
    │                     │ mapping_master_     │                                │
    │                     │ sheet               │                                │
    │                     └────────┬────────────┘                                │
    │                              │                                             │
    │                              ▼                                             │
    │                     ┌─────────────────────┐                                │
    │                     │ mapping_validation_ │                                │
    │                     │ gate                │                                │
    │                     └────────┬────────────┘                                │
    └────────────────────────────────│───────────────────────────────────────────┘
                                     │ ✓ pass
                                     ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 3: FUTURE STATE ARCHITECTURE                     │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ arch_url_       │───▶│ arch_           │───▶│ arch_vercel_    │        │
    │  │ structure       │    │ consolidations  │    │ redirects       │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ arch_ghost_urls │          │
    │                                               └────────┬────────┘          │
    │                                                        │                   │
    │                                                        ▼                   │
    │                                               ┌─────────────────┐          │
    │                                               │ arch_validation_│          │
    │                                               │ gate            │          │
    │                                               └────────┬────────┘          │
    └────────────────────────────────────────────────────────│────────────────────┘
                                                             │ ✓ pass
                                                             ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 4: BUILD                                         │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ build_repo_     │───▶│ build_cms_      │───▶│ build_content_  │        │
    │  │ setup           │    │ decision        │    │ migrate         │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ build_staging_  │          │
    │                                               │ deploy          │          │
    │                                               └────────┬────────┘          │
    │                                                        │                   │
    │                                                        ▼                   │
    │                                               ┌─────────────────┐          │
    │                                               │ build_          │          │
    │                                               │ validation_gate │          │
    │                                               └────────┬────────┘          │
    └────────────────────────────────────────────────────────│────────────────────┘
                                                             │ ✓ pass
                                                             ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 5: TECHNICAL SEO                                 │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ techseo_        │───▶│ techseo_        │───▶│ techseo_        │        │
    │  │ headings_audit  │    │ metadata_audit  │    │ schema_impl     │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ techseo_        │          │
    │                                               │ validation_gate │          │
    │                                               └────────┬────────┘          │
    └────────────────────────────────────────────────────────│────────────────────┘
                                                             │ ✓ pass
                                                             ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 6: PERFORMANCE / CWV                             │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ cwv_baseline_   │───▶│ cwv_budget_     │───▶│ cwv_            │        │
    │  │ measure         │    │ define          │    │ optimizations   │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ cwv_staging_    │          │
    │                                               │ test            │          │
    │                                               └────────┬────────┘          │
    │                                                        │                   │
    │                                                        ▼                   │
    │  ┌─────────────────┐    ┌─────────────────┐                               │
    │  │ cwv_            │◀───│ cwv_validation_ │   (retry if fail)             │
    │  │ optimizations   │    │ gate            │                               │
    │  └─────────────────┘    └────────┬────────┘                               │
    │         TARGETS:                 │                                         │
    │         LCP ≤ 2.5s              │                                         │
    │         INP ≤ 200ms             │                                         │
    │         CLS ≤ 0.1               │                                         │
    └────────────────────────────────────│───────────────────────────────────────┘
                                         │ ✓ pass
                                         ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 7: QA                                            │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ qa_seo_crawl    │    │ qa_redirects_   │    │ qa_tracking_    │        │
    │  │                 │    │ test            │    │ verify          │        │
    │  └────────┬────────┘    └────────┬────────┘    └────────┬────────┘        │
    │           │                      │                      │                  │
    │           └──────────────────────┴──────────────────────┘                  │
    │                                  │ (parallel)                              │
    │                                  ▼                                         │
    │                     ┌─────────────────────┐                                │
    │                     │ qa_validation_gate  │                                │
    │                     └────────┬────────────┘                                │
    └────────────────────────────────│───────────────────────────────────────────┘
                                     │ ✓ pass
                                     ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 8: LAUNCH                                        │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ launch_wp_      │───▶│ launch_push_    │───▶│ launch_dns_     │        │
    │  │ freeze          │    │ redirects       │    │ swap            │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ launch_         │          │
    │                                               │ validation      │          │
    │                                               └────────┬────────┘          │
    │                                                        │                   │
    │                                                        ▼                   │
    │                                               ┌─────────────────┐          │
    │                                               │ launch_sitemap_ │          │
    │                                               │ submit          │          │
    │                                               └────────┬────────┘          │
    └────────────────────────────────────────────────────────│────────────────────┘
                                                             │ ✓ pass
                                                             ▼
    ┌────────────────────────────────────────────────────────────────────────────┐
    │                     PHASE 9: POST-LAUNCH                                   │
    │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐        │
    │  │ postlaunch_     │───▶│ postlaunch_     │───▶│ postlaunch_     │        │
    │  │ new_pages       │    │ internal_links  │    │ local_trust     │        │
    │  └─────────────────┘    └─────────────────┘    └────────┬────────┘        │
    │                                                         │                  │
    │                                                         ▼                  │
    │                                               ┌─────────────────┐          │
    │                                               │ postlaunch_     │          │
    │                                               │ monitoring      │          │
    │                                               └────────┬────────┘          │
    └────────────────────────────────────────────────────────│────────────────────┘
                                                             │
                         ┌───────────────────────────────────┼───────────────────┐
                         │                                   │                   │
                         ▼                                   ▼                   ▼
                   ┌───────────┐                       ┌───────────┐       ┌───────────┐
                   │  SUCCESS  │                       │  FAILURE  │       │ ESCALATE  │
                   │ (terminal)│                       │ (terminal)│       │ (terminal)│
                   └───────────┘                       └───────────┘       └───────────┘
```

## Node Types Used

| Type | Count | Purpose |
|------|-------|---------|
| prime | 1 | Entry point (intake) |
| flow | ~35 | Sequential processing |
| gate | 8 | Validation checkpoints |
| tributary | 4 | Parallel data collection |
| terminal | 3 | Exit points |

## Key Validation Gates

1. **keyword_validation_gate** - Ensures all intent buckets covered
2. **mapping_validation_gate** - All URLs with traffic/backlinks mapped
3. **arch_validation_gate** - Redirect plan verified
4. **build_validation_gate** - Staging deployed and accessible
5. **techseo_validation_gate** - H1, meta, schema valid
6. **cwv_validation_gate** - LCP ≤ 2.5s, INP ≤ 200ms, CLS ≤ 0.1
7. **qa_validation_gate** - All QA checks pass
8. **launch_validation_gate** - DNS propagated, site live

## Skills Integration

- `web_fetch` - Content retrieval
- `screaming_frog` - Site crawling
- `gsc_export` - Google Search Console data
- `ahrefs_api` - Backlink data
- `vercel_cli` - Deployment management
- `lighthouse` - Performance testing
